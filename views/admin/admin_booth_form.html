{{ define "admin_booth_form.html" }}
{{ template "admin_header" . }}

<div class="max-w-3xl mx-auto mt-6">
    
    <div class="flex items-center gap-4 mb-6">
        <a href="/api/admin/booths" class="p-2 rounded-full hover:bg-gray-100 transition">
            <i data-lucide="arrow-left" class="w-6 h-6 text-gray-600"></i>
        </a>
        <h1 class="text-2xl font-bold text-sukatani-dark">{{ .Title }}</h1>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="bg-sukatani-light px-6 py-4 border-b border-gray-200">
            <h2 class="font-semibold text-gray-800">Informasi Booth</h2>
        </div>

        <div class="p-6">
            <form 
                {{ if eq .Type "create" }}
                    action="/api/admin/booths" method="POST"
                {{ else }}
                    hx-put="/api/admin/booths/{{ .Data.ID }}" 
                    hx-target="this"
                    hx-swap="none"
                {{ end }}
                class="space-y-6"
            >
            <input type="hidden" name="csrf_token" value="{{ .csrf_token }}">
                {{ if .Error }}
                <div class="bg-red-50 text-red-700 p-4 rounded-lg border border-red-200 flex items-center gap-2">
                    <i data-lucide="alert-circle" class="w-5 h-5"></i>
                    <span>{{ .Error }}</span>
                </div>
                {{ end }}

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Booth</label>
                    <input type="text" name="name" required 
                           value="{{ if .Data }}{{ .Data.Name }}{{ end }}"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sukatani-dark focus:border-transparent outline-none transition"
                           placeholder="Contoh: Booth Nasi Goreng">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nomor WhatsApp</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i data-lucide="phone" class="w-4 h-4 text-gray-400"></i>
                        </div>
                        <input type="text" name="whatsapp" required 
                               value="{{ if .Data }}{{ .Data.WhatsApp }}{{ end }}"
                               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sukatani-dark focus:border-transparent outline-none transition"
                               placeholder="0812...">
                    </div>
                </div>

                <div class="flex items-center p-4 bg-gray-50 rounded-lg border border-gray-100">
                    <input type="checkbox" id="is_active" name="is_active" 
                           {{ if .Data }}{{ if .Data.IsActive }}checked{{ end }}{{ else }}checked{{ end }}
                           class="w-5 h-5 text-sukatani-dark border-gray-300 rounded focus:ring-sukatani-dark cursor-pointer">
                    <label for="is_active" class="ml-3 block text-sm font-medium text-gray-700 cursor-pointer">
                        Status Aktif (Tampilkan di menu pelanggan)
                    </label>
                </div>

                <div class="flex justify-end gap-3 pt-4 border-t border-gray-100 mt-6">
                    <a href="/api/admin/booths" class="px-5 py-2.5 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                        Batal
                    </a>
                    <button type="submit" class="px-5 py-2.5 text-sm font-medium text-white bg-sukatani-green rounded-lg hover:bg-opacity-90 transition flex items-center gap-2">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Simpan Data
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{{ if eq .Type "edit" }}
<script>
    document.body.addEventListener('htmx:afterRequest', function(evt) {
        if (evt.detail.successful) {
          
            window.location.href = "/api/admin/booths";
        } else {
            alert("Gagal update: " + evt.detail.xhr.responseText);
        }
    });
</script>
{{ end }}

{{ template "admin_footer" . }}
{{ end }}